var pokemonRepository=function(){var t=[],n="https://pokeapi.co/api/v2/pokemon/?limit=150";function e(n){t.push(n)}function o(t){var n=t.detailsUrl;return $.ajax(n,{dataType:"json"}).then(function(n){t.imageUrl=n.sprites.front_default,t.height=n.height,t.types=n.types}).catch(function(t){console.error(t)})}function a(t){o(t).then(function(){s(t)})}var i=$("#modal-container");function s(t){i.empty();var n=$('<div class="shown.bs.modal"></div>'),e=$('<button class="btn btn-secondary" type="modal-close"></button>').text("Close");e.on("click",l);var o=$("<h1></h1>").text(t.name),a=$("<p></p>").text(t.height),s=$("<img>");s.attr("src",t.imageUrl),n.append(e),n.append(o),n.append(a),n.append(s),i.append(n),i.addClass("is-visible"),i.click(function(t){var n=t.target;console.log(t.target),n===i&&l()})}function l(){i.removeClass("is-visible")}return window.addEventListener("keydown",t=>{"Escape"===t.key&&$("#modal-container").classList.contains("is-visible")&&l()}),{add:e,getAll:function(){return t},loadList:function(){return $.ajax(n,{dataType:"json"}).then(function(t){$.each(t.results,function(t,n){e({name:n.name,detailsUrl:n.url})})}).catch(function(t){console.error(t)})},loadDetails:o,showDetails:a,showModal:s,hideModal:l,addListItem:function(t){var n=$("<li class='list-group'></li>"),e=$("<a href='#' class='list-group-item list-group-item-action'></a>").text(t.name);$(".list-group").append(n),$(n).append(e),e.click(function(n){a(t)})}}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(t){pokemonRepository.addListItem(t)})});